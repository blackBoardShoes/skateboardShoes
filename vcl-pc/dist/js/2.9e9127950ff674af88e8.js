webpackJsonp([2],{BYP6:function(e,t){},"M+5r":function(e,t){},TmV0:function(e,t,a){a("fZOM"),e.exports=a("FeBl").Object.values},"WZ/h":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("woOf"),i=a.n(l),n=a("BO1k"),r=a.n(n),s=a("Xxa5"),c=a.n(s),o=a("exGp"),u=a.n(o),T=a("t9TI"),E=a("UhWg"),d=a("gRE1"),h=a.n(d),p={components:{sxRelationFactory:a("eH3R").a},props:{value:{type:Array,default:function(){return[]}}},watch:{value:function(){this.listData=this.value}},data:function(){return{checkedClass:null,lookupData:"",listData:this.value,needCreatedRelation:{},relationDialogVisible:!1,oneToOne:[{label:"选择器",value:"SELECT"},{label:"文本标签",value:"TEXTAREA"},{label:"多选选择器",value:"SELECTMUTIPLE"},{label:"日期时间选择器",value:"DATETIME"},{label:"计算",value:"CALCULATE"},{label:"单选框",value:"RADIO"},{label:"表格",value:"TABLE"},{label:"日期选择器",value:"DATE"},{label:"整数类型输入框",value:"INT"},{label:"多选框",value:"CHECKBOX"},{label:"输入框",value:"INPUT"},{label:"级联选择器",value:"CASCADER"},{label:"文本单选框",value:"RADIOTEXT"},{label:"文本多选框",value:"CHECKBOXTEXT"},{label:"浮点类型输入框",value:"DOUBLE"}],defaultCheckList:["INT","DOUBLE","TEXTAREA","RADIO","RADIOTEXT","CHECKBOX","CHECKBOXTEXT","SELECT","SELECTMUTIPLE","DATE","DATETIME","CASCADER","INPUT","TABLE","CALCULATE"],checkList:["INT","DOUBLE","TEXTAREA","RADIO","RADIOTEXT","CHECKBOX","CHECKBOXTEXT","SELECT","SELECTMUTIPLE","DATE","DATETIME","CASCADER","INPUT","TABLE","CALCULATE"],checkListData:["INT","DOUBLE","TEXTAREA","RADIO","RADIOTEXT","CHECKBOX","CHECKBOXTEXT","SELECT","SELECTMUTIPLE","DATE","DATETIME","CASCADER","INPUT","TABLE","CALCULATE"]}},computed:{badgeValue:function(){var e=0,t=!0,a=!1,l=void 0;try{for(var i,n=r()(this.listData);!(t=(i=n.next()).done);t=!0){i.value.isFinished||e++}}catch(e){a=!0,l=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw l}}return e}},methods:{clearCheckList:function(){this.checkList=[]},resetCheckList:function(){this.checkList=this.defaultCheckList},lookupChange:function(e){return!this.lookupData||h()(e).toString().includes(this.lookupData)},filterItem:function(e){return this.checkList.includes(e.type)},oneToOneText:function(e){var t=!0,a=!1,l=void 0;try{for(var i,n=r()(this.oneToOne);!(t=(i=n.next()).done);t=!0){var s=i.value;if(e===s.value)return s.label}}catch(e){a=!0,l=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw l}}},iconJudgeChoose:function(e){var t="";switch(e){case"INPUT":t="ercp-icon-component-input";break;case"INT":case"DOUBLE":t="ercp-icon-component-integer";break;case"TEXTAREA":t="ercp-icon-component-textarea";break;case"RADIO":case"RADIOTEXT":t="ercp-icon-component--radio";break;case"CHECKBOX":case"CHECKBOXTEXT":t="ercp-icon-component-check";break;case"SELECT":case"SELECTMUTIPLE":t="ercp-icon-component-checklist";break;case"DATE":t="ercp-icon-component-date";break;case"DATETIME":t="ercp-icon-component-time";break;case"CASCADER":t="ercp-icon-component-cascade";break;case"CALCULATE":t="ercp-icon-component-compute";break;case"TABLE":t="ercp-icon-component-table";break;default:t="el-icon-info"}return t},deleteFish:function(e,t){this.$emit("deleteFish",e,t)},openRelation:function(e){this.needCreatedRelation=e,this.relationDialogVisible=!0},getRealationData:function(e,t){var a=!0,l=!1,i=void 0;try{for(var n,s=r()(this.listData);!(a=(n=s.next()).done);a=!0){var c=n.value;c.id===t&&(this.$set(c,"relation",e),this.$emit("getRealationData",c))}}catch(e){l=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(l)throw i}}this.relationDialogVisible=!1},newCreateFish:function(){this.$emit("newCreateFish",!0)},resetData:function(){this.checkedClass=null},editFish:function(e,t){this.checkedClass=t,this.$emit("editFish",e,t)},saveAllFish:function(){this.$emit("saveAllFish",this.listData)}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fieldAll"},[a("div",{staticClass:"fieldContent"},[a("div",{staticStyle:{"margin-bottom":"5px",height:"90px"}},[a("div",{staticStyle:{width:"100%","text-align":"right",display:"flex","align-items":"flex-end",height:"46px","justify-content":"space-between"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.newCreateFish}},[e._v("新增字段")]),e._v(" "),a("div",[a("el-popover",{attrs:{placement:"bottom-start",width:"300",trigger:"click"}},[a("el-button",{attrs:{slot:"reference",size:"small"},slot:"reference"},[e._v("筛选")]),e._v(" "),a("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.checkListData,function(t,l){return a("el-checkbox",{key:l,staticStyle:{width:"100px",margin:"10px 20px"},attrs:{label:t}},[e._v(e._s(e.oneToOneText(t)))])})),e._v(" "),a("div",{staticStyle:{width:"100%","text-align":"right"}},[a("el-button",{attrs:{size:"small"},on:{click:e.clearCheckList}},[e._v("清空")]),e._v(" "),a("el-button",{staticStyle:{margin:"10px 20px"},attrs:{type:"primary",plain:"",size:"small"},on:{click:e.resetCheckList}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),a("el-input",{attrs:{clearable:"","prefix-icon":"el-icon-search",placeholder:"字段名称"},model:{value:e.lookupData,callback:function(t){e.lookupData=t},expression:"lookupData"}})],1),e._v(" "),a("div",{staticClass:"listContentBottom"},[a("div",{staticClass:"listContent"},e._l(e.listData,function(t,l){return e.lookupChange(t)&e.filterItem(t)?a("div",{key:l,class:{listItem:!0,checkedClass:e.checkedClass===l},on:{click:function(a){e.editFish(t,l)}}},[a("div",{staticClass:"listItemLeft"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.label,placement:"left"}},[a("i",{class:e.iconJudgeChoose(t.type)})]),e._v(" "),a("div",{staticClass:"listItemLeftText"},[e._v(" "+e._s(t.label))])],1),e._v(" "),a("div",{staticClass:"listItemRight"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.oneToOneText(t.type),placement:"left"}},[a("div",{staticClass:"listItemRightText"},[e._v(e._s(e.oneToOneText(t.type)))])]),e._v(" "),"TABLE"===t.type?a("el-button",{attrs:{circle:"",type:"primary",size:"mini",icon:"el-icon-setting"},on:{click:function(a){a.stopPropagation(),e.openRelation(t)}}}):e._e(),e._v(" "),a("el-button",{attrs:{circle:"",type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(a){a.stopPropagation(),e.deleteFish(t,l)}}})],1)]):e._e()}))])]),e._v(" "),e.relationDialogVisible?a("el-dialog",{attrs:{title:"关联关系","append-to-body":"","modal-append-to-body":"",visible:e.relationDialogVisible},on:{"update:visible":function(t){e.relationDialogVisible=t}}},[a("div",{staticStyle:{width:"100%"}},[a("sx-relation-factory",{attrs:{needCreatedRelation:e.needCreatedRelation},on:{getRealationData:e.getRealationData}})],1)]):e._e()],1)},staticRenderFns:[]};var C=a("VU/8")(p,v,!1,function(e){a("M+5r")},"data-v-29462738",null).exports,f={components:{sxSegmentingLine:E.a,sxFieldLibrary:C},data:function(){return{allFish:{relation:{pattern:{target:"type",ruleType:"EQUAL",value:["INPUT","INT","DOUBLE","TEXTAREA"]},message:{target:"type",ruleType:"EQUAL",value:["INPUT","INT","DOUBLE","TEXTAREA"]},unit:{target:"type",ruleType:"EQUAL",value:["INPUT","INT","DOUBLE"]},example:{target:"type",ruleType:"EQUAL",value:["INPUT","INT","DOUBLE","TEXTAREA"]},nullRadio:{target:"type",ruleType:"EQUAL",value:["RADIO"]},required:{target:"type",ruleType:"EQUAL",value:["INPUT","INT","DOUBLE","SELECT","SELECTMUTIPLE","DATE","DATETIME","RADIO","RADIOTEXT","TEXTAREA","CHECKBOX","CHECKBOXTEXT","CASCADER"]},tree:{target:"type",ruleType:"EQUAL",value:"CASCADER"},layerTree:{target:"type",ruleType:"EQUAL",value:["SELECT","SELECTMUTIPLE","RADIO","RADIOTEXT","CHECKBOX","CHECKBOXTEXT"]},createCalculate:{target:"type",ruleType:"EQUAL",value:"CREATECALCULATE"},createTable:{target:"type",ruleType:"EQUAL",value:"CREATETABLE"}},fields:[{id:"type",label:"请选择类型",value:"",type:"RADIO",values:[{label:"单选框",value:"RADIO"},{label:"文本单选框",value:"RADIOTEXT"},{label:"文本标签",value:"TEXTAREA"},{label:"多选选择器",value:"SELECTMUTIPLE"},{label:"日期时间选择器",value:"DATETIME"},{label:"计算",value:"CREATECALCULATE"},{label:"选择器",value:"SELECT"},{label:"创建表格",value:"CREATETABLE"},{label:"日期选择器",value:"DATE"},{label:"整数类型输入框",value:"INT"},{label:"多选框",value:"CHECKBOX"},{label:"文本多选框",value:"CHECKBOXTEXT"},{label:"输入框",value:"INPUT"},{label:"级联选择器",value:"CASCADER"},{label:"浮点类型输入框",value:"DOUBLE"}],validations:[{required:!0,message:"请选择类型",trigger:"change"}]},{id:"id",label:"ID",value:"",type:"INPUT",validations:[{required:!0,message:"请输入组件ID",trigger:"change"},{pattern:"^[a-z][a-zA-Z0-9]+$",message:"只能输入以小写英文字母开头的英文或数字(两位以上),为统一建议驼峰式,如oneTwo",trigger:"change"}]},{id:"label",label:"标签名字",value:"",type:"INPUT",validations:[{required:!0,message:"请输入组件标签名",trigger:"change"}]},{id:"pattern",label:"取值范围",type:"INPUT"},{id:"example",label:"取值范围示例",type:"EXAMPLE"},{id:"message",label:"取值范围提示",type:"INPUT"},{id:"unit",label:"单位",type:"INPUT"},{id:"nullRadio",label:"标题示例",type:"NULLRADIO"},{id:"tree",label:"创建级联",type:"TREE",values:[]},{id:"layerTree",label:"创建选项",type:"LAYERTREE",values:[]},{id:"required",label:"是否必填",value:"",type:"RADIO",values:[{label:"是",value:1},{label:"否",value:0}]},{id:"createCalculate",label:"ID公式",value:"",type:"CREATECALCULATE",validations:[{required:!0,message:"请输入需要计算的 ID 公式,如 (id1+id2)",trigger:"blur"}]},{id:"createTable",label:"创建表格",type:"CREATETABLE",values:[]}]},fishData:{},listData:[],fishNeedEditData:{},thatFish:{},thatFishData:{},thatFishDataTF:!1}},created:function(){this.show()},methods:{show:function(){var e=this;return u()(c.a.mark(function t(){var a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(T.a)();case 2:a=t.sent,console.log(a),a&&(e.listData=a.data.entity);case 5:case"end":return t.stop()}},t,e)}))()},newCreateFish:function(){this.fishNeedEditData={},this.thatFish={},this.$refs.thatForm.resetData(),this.$refs.thatFieldLibrary.resetData()},auxiliaryType:function(e){switch(e.type){case"CREATETABLE":e.values=[],e.tree=[],e.layerTree=[],e.createCalculate="",e.subFields=[];var t=!0,a=!1,l=void 0;try{for(var i,n=r()(e.createTable);!(t=(i=n.next()).done);t=!0){var s=i.value;e.subFields.push({id:s})}}catch(e){a=!0,l=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw l}}e.type="TABLE";break;case"TABLE":e.type="CREATETABLE";break;case"SELECT":case"SELECTMUTIPLE":case"RADIO":case"RADIOTEXT":case"CHECKBOX":case"CHECKBOXTEXT":e.createTable=[],e.layerTree?e.values=e.layerTree:e.values?e.layerTree=e.values:e.layerTree=[],e.tree=[],e.createCalculate="";break;case"CASCADER":e.createTable=[],e.tree?e.children=e.tree:e.children?e.tree=e.children:e.tree=[],e.layerTree=[],e.createCalculate="";break;case"CREATECALCULATE":e.createTable=[],e.layerTree=[],e.tree=[],e.type="CALCULATE",e.createCalculate?e.calculate=e.createCalculate:e.calculate?e.createCalculate=e.calculate:e.calculate="";break;case"CALCULATE":e.createCalculate?e.calculate=e.createCalculate:e.calculate?e.createCalculate=e.calculate:e.calculate="",e.type="CREATECALCULATE";break;default:e.createCalculate="",e.createTable=[],e.layerTree=[],e.tree=[],e.values=[]}return console.log(e),e},conversion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(e.validations=[],e.type){case"INPUT":case"INT":case"DOUBLE":case"SELECT":case"DATE":case"DATETIME":case"RADIO":case"RADIOTEXT":case"TEXTAREA":case"CHECKBOX":case"CHECKBOXTEXT":case"CASCADER":case"SELECTMUTIPLE":e.required&&e.validations.push({required:Boolean(e.required),message:"请输入或选择"+e.label,trigger:"change"}),"INPUT"===e.type|"INT"===e.type|"DOUBLE"===e.type|"TEXTAREA"===e.type&&e.pattern&&e.validations.push({pattern:e.pattern,message:e.message?e.message:"请按规则填写",trigger:"change"})}return e},createFish:function(e,t,a,l,n){var s=this;return u()(c.a.mark(function a(){var l,n,o,u,E,d,h,p;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log(e,t,"formModelformModelformModelformModelformModelformModelformModelformModel"),l=s.conversion(s.auxiliaryType(i()({},t))),n="",!s.fishNeedEditData.row){a.next=10;break}return a.next=6,Object(T.d)(l);case 6:n=a.sent,console.log(n,"fieldUpdatefieldUpdatefieldUpdate"),a.next=41;break;case 10:o=!0,u=!1,E=void 0,a.prev=13,d=r()(s.listData);case 15:if(o=(h=d.next()).done){a.next=23;break}if(p=h.value,t.id!==p.id){a.next=20;break}return s.$message({showClose:!0,message:"保存失败, ID已存在",type:"warning"}),a.abrupt("return");case 20:o=!0,a.next=15;break;case 23:a.next=29;break;case 25:a.prev=25,a.t0=a.catch(13),u=!0,E=a.t0;case 29:a.prev=29,a.prev=30,!o&&d.return&&d.return();case 32:if(a.prev=32,!u){a.next=35;break}throw E;case 35:return a.finish(32);case 36:return a.finish(29);case 37:return a.next=39,Object(T.c)(l);case 39:n=a.sent,console.log(n);case 41:if(!n){a.next=48;break}return a.next=44,s.show();case 44:s.$refs.thatFieldLibrary.resetData(),s.$refs.thatForm.resetData(),s.fishNeedEditData={},s.$set(s.thatFish,"fields",[]);case 48:case"end":return a.stop()}},a,s,[[13,25,29,37],[30,,32,36]])}))()},editFish:function(e,t){var a=this;return u()(c.a.mark(function l(){var n;return c.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return a.thatFishDataTF=!1,console.log(e,t,"editfish"),a.thatFishData={},a.fishNeedEditData={index:t,row:e},a.fishData=a.auxiliaryType(i()({},e)),"CREATETABLE"===(n=a.auxiliaryType(i()({},e))).type&&(n.type="TABLE"),"CREATECALCULATE"===n.type&&(n.type="CALCULATE"),console.log(n,"rowDatarowDatarowData"),a.$set(a.thatFish,"fields",[]),l.next=12,a.thatFish.fields.push(n);case 12:setTimeout(function(e){a.thatFishDataTF=!0,a.$nextTick(function(e){a.$refs.thatFormPreview.resetData()})},1);case 13:case"end":return l.stop()}},l,a)}))()},deleteFish:function(e,t){var a=this;return u()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.$confirm("此操作将删除字段","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=u()(c.a.mark(function t(l){var i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(T.b)(e.id);case 2:i=t.sent,console.log(i),a.fishNeedEditData={},a.thatFish={},a.$refs.thatForm.resetData(),a.$refs.thatFieldLibrary.resetData(),a.show();case 9:case"end":return t.stop()}},t,a)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){});case 1:case"end":return t.stop()}},t,a)}))()},getRealationData:function(e){var t=this;return u()(c.a.mark(function a(){var l;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log(e,"getRealationDatagetRealationData"),e.subFields)for(l in e.subFields)e.subFields[l]={id:e.subFields[l].id};return console.log(e),a.next=5,Object(T.d)(e);case 5:t.show();case 6:case"end":return a.stop()}},a,t)}))()}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"zdkAll"},[a("div",{staticClass:"zdkContent"},[a("div",{staticClass:"zdkContentBottom"},[a("div",{staticClass:"zdkContentBottomLeft"},[a("sx-segmenting-line",[a("div",{staticClass:"centerCenter",attrs:{slot:"prepend"},slot:"prepend"},[a("i",{staticClass:"el-icon-setting centerCenterIcon"}),e._v(" 字段属性\n          ")]),e._v(" "),a("div",{staticClass:"centerCenter",attrs:{slot:"append"},slot:"append"})]),e._v(" "),a("div",{staticStyle:{padding:"20px"}},[a("sx-min-form",{ref:"thatForm",attrs:{submitTF:"",mozhu:e.allFish,momo:e.listData},on:{consoleData:e.createFish},model:{value:e.fishData,callback:function(t){e.fishData=t},expression:"fishData"}})],1),e._v(" "),a("sx-segmenting-line",[a("div",{staticClass:"centerCenter",attrs:{slot:"prepend"},slot:"prepend"},[a("i",{staticClass:"el-icon-setting centerCenterIcon"}),e._v(" 字段浏览\n          ")])]),e._v(" "),a("div",{staticStyle:{padding:"20px","max-height":"250px"}},[e.thatFishDataTF?a("sx-min-form",{ref:"thatFormPreview",attrs:{mozhu:e.thatFish},model:{value:e.thatFishData,callback:function(t){e.thatFishData=t},expression:"thatFishData"}}):e._e()],1)],1),e._v(" "),a("div",{staticClass:"zdkContentBottomRight"},[a("sx-field-library",{ref:"thatFieldLibrary",on:{newCreateFish:e.newCreateFish,getRealationData:e.getRealationData,editFish:e.editFish,deleteFish:e.deleteFish},model:{value:e.listData,callback:function(t){e.listData=t},expression:"listData"}})],1)])])])},staticRenderFns:[]};var b=a("VU/8")(f,A,!1,function(e){a("BYP6")},"data-v-bd97a8ec",null);t.default=b.exports},fZOM:function(e,t,a){var l=a("kM2E"),i=a("mbce")(!1);l(l.S,"Object",{values:function(e){return i(e)}})},gRE1:function(e,t,a){e.exports={default:a("TmV0"),__esModule:!0}},mbce:function(e,t,a){var l=a("lktj"),i=a("TcQ7"),n=a("NpIQ").f;e.exports=function(e){return function(t){for(var a,r=i(t),s=l(r),c=s.length,o=0,u=[];c>o;)n.call(r,a=s[o++])&&u.push(e?[a,r[a]]:r[a]);return u}}}});