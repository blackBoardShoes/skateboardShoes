webpackJsonp([34],{"82+p":function(e,t){},Wqub:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),r=a.n(i),s=a("exGp"),n=a.n(s),o=a("YaB9"),l={name:"projectManage",data:function(){return{selfBuild:!0,searchMyProject:"",searchJoinProject:"",tableData:[],tableData2:[],dialogTableVisible:!1,addedProject:{},rules:{name:[{required:!0,message:"必填项不能为空"}],abbreviation:[{required:!0,message:"必填项不能为空"}]},pageSize:10,currentPage:1,total:30,pageSize2:10,currentPage2:1,total2:20,gotMyTotal:!1,gotJoinTotal:!1,selfProjectTotals:0,joinProjectTotals:0}},methods:{search:function(){this.getMyProject(this.pageSize,1,this.searchMyProject)},search2:function(){this.getJoinProject(this.pageSize2,1,this.searchJoinProject)},viewProject:function(e){this.$router.push("/project/detail/"+e.id+"/basic")},cancel:function(){this.dialogTableVisible=!1,this.$refs.newProject.resetFields()},confirmAdd:function(){var e=this;return n()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.newProject.validate(function(){var t=n()(r.a.mark(function t(a){var i,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=9;break}return(i=e.addedProject).creator=e.$store.state.user.id,t.next=5,Object(o.a)(i);case 5:"SUCCESS"===(s=t.sent).data.mitiStatus?(e.getMyProject(10,1,e.searchMyProject),e.dialogTableVisible=!1):e.$message.error("ERROR: "+s.data.message),t.next=10;break;case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}},t,e)}))()},SizeChange:function(e){this.pageSize=e,this.getMyProject(e,1,this.searchMyProject)},changePage:function(e){this.currentPage=e,this.getMyProject(this.pageSize,e,this.searchMyProject)},SizeChange2:function(e){this.pageSize2=e,this.getJoinProject(e,1,this.searchJoinProject)},changePage2:function(e){this.currentPage2=e,this.getJoinProject(this.pageSize2,e,this.searchJoinProject)},getMyProject:function(e,t,a){var i=this;return n()(r.a.mark(function s(){var n,l;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n={userId:i.$store.state.user.id,projectType:"create",perPage:e,currentPage:t,searchText:a},r.next=3,Object(o.d)(n);case 3:"SUCCESS"===(l=r.sent).data.mitiStatus?(i.tableData=l.data.entity.data,i.total=l.data.entity.total,i.gotMyTotal||(i.selfProjectTotals=l.data.entity.total,i.gotMyTotal=!0)):i.$message.error("ERROR: "+l.data.message);case 5:case"end":return r.stop()}},s,i)}))()},getJoinProject:function(e,t,a){var i=this;return n()(r.a.mark(function s(){var n,l;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n={userId:i.$store.state.user.id,projectType:"join",perPage:e,currentPage:t,searchText:a},r.next=3,Object(o.d)(n);case 3:"SUCCESS"===(l=r.sent).data.mitiStatus?(i.tableData2=l.data.entity.data,i.total2=l.data.entity.total,i.gotJoinTotal||(i.joinProjectTotals=l.data.entity.total,i.gotJoinTotal=!0)):i.$message.error("ERROR: "+l.data.message);case 5:case"end":return r.stop()}},s,i)}))()}},mounted:function(){this.getMyProject(10,1,this.searchMyProject),this.getJoinProject(10,1,this.searchJoinProject)}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"project-manage"}},[a("div",{staticClass:"left-nav"},[e._m(0),e._v(" "),a("div",{class:{"nav-case":!0,active:!0===e.selfBuild},on:{click:function(t){e.selfBuild=!0}}},[e._m(1),e._v(" "),a("div",{staticClass:"right-text nav-light-text"},[a("div",{staticClass:"title"},[e._v("自建项目")]),e._v(" "),a("div",{staticClass:"count"},[e._v(e._s(e.selfProjectTotals)+" 项")])])]),e._v(" "),a("div",{class:{"nav-case":!0,active:!1===e.selfBuild},on:{click:function(t){e.selfBuild=!1}}},[e._m(2),e._v(" "),a("div",{staticClass:"right-text nav-light-text"},[a("div",{staticClass:"title"},[e._v("参与项目")]),e._v(" "),a("div",{staticClass:"count"},[e._v(e._s(e.joinProjectTotals)+" 项")])])])]),e._v(" "),a("div",{staticClass:"right-content"},[a("div",{staticClass:"content-operate"},[a("div",{staticClass:"search float-left"},[!0===e.selfBuild?a("el-input",{attrs:{size:"medium",placeholder:"检索自建项目",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.searchMyProject,callback:function(t){e.searchMyProject=t},expression:"searchMyProject"}},[a("i",{staticClass:"ercp-icon-general-search el-input__icon",attrs:{slot:"prefix"},on:{click:e.search},slot:"prefix"})]):e._e(),e._v(" "),!1===e.selfBuild?a("el-input",{attrs:{size:"medium",placeholder:"检索参与项目",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search2(t)}},model:{value:e.searchJoinProject,callback:function(t){e.searchJoinProject=t},expression:"searchJoinProject"}},[a("i",{staticClass:"ercp-icon-general-search el-input__icon",attrs:{slot:"prefix"},on:{click:e.search2},slot:"prefix"})]):e._e()],1),e._v(" "),!0===e.selfBuild?a("el-button",{staticClass:"float-right",attrs:{type:"primary",size:"medium"},on:{click:function(t){e.dialogTableVisible=!0}}},[e._v("新增项目")]):e._e()],1),e._v(" "),a("div",{staticClass:"content"},[a("el-table",{staticClass:"absolute-table",staticStyle:{width:"100%"},attrs:{data:!0===e.selfBuild?e.tableData:e.tableData2,size:"medium",fit:"",height:"100%"}},[a("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":"",align:"center",label:"项目名称"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"abbreviation",align:"center",label:"项目简称",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"creatorSta",align:"center",label:"项目负责人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.creatorSta.username))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"members",align:"center",label:"项目成员数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.members.length))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",label:"项目状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s("1"===t.row.status?"正常":"锁定"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"patients",align:"center",label:"入组患者",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.patients.length))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"creatTime",align:"center",label:"创建日期",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operate",align:"center",label:"操作",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(a){e.viewProject(t.row)}}},[e._v("查看")])]}}])})],1)],1),e._v(" "),!0===e.selfBuild?a("div",{staticClass:"pagination align-right"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[5,10,15,20],total:e.total,"current-page":e.currentPage,"page-size":e.pageSize},on:{"size-change":e.SizeChange,"current-change":e.changePage}})],1):e._e(),e._v(" "),!1===e.selfBuild?a("div",{staticClass:"pagination align-right"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,15,20],total:e.total2,"current-page":e.currentPage2,"page-size":e.pageSize2},on:{"size-change":e.SizeChange2,"current-change":e.changePage2}})],1):e._e()]),e._v(" "),a("el-dialog",{attrs:{title:"添加项目",visible:e.dialogTableVisible,"append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-form",{ref:"newProject",attrs:{rules:e.rules,model:e.addedProject,"label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"项目名称:",prop:"name"}},[a("el-input",{attrs:{size:"small"},model:{value:e.addedProject.name,callback:function(t){e.$set(e.addedProject,"name",t)},expression:"addedProject.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目简称:",prop:"abbreviation"}},[a("el-input",{attrs:{size:"small"},model:{value:e.addedProject.abbreviation,callback:function(t){e.$set(e.addedProject,"abbreviation",t)},expression:"addedProject.abbreviation"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目简介:",prop:"intro"}},[a("el-input",{attrs:{type:"textarea",size:"small"},model:{value:e.addedProject.intro,callback:function(t){e.$set(e.addedProject,"intro",t)},expression:"addedProject.intro"}})],1)],1),e._v(" "),a("div",{staticClass:"operate align-center"},[a("el-button",{attrs:{type:"info"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmAdd}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page-title"},[t("h4",[this._v("项目管理")]),this._v(" "),t("h5",{staticClass:"light-text"},[this._v("Project Management")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"left-icon"},[t("span",{staticClass:"ercp-icon-module-create"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"left-icon"},[t("span",{staticClass:"ercp-icon-module-join"})])}]};var u=a("VU/8")(l,c,!1,function(e){a("82+p")},"data-v-2b21e8c1",null);t.default=u.exports}});