webpackJsonp([32],{"4mOL":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("woOf"),r=a.n(n),i=a("BO1k"),s=a.n(i),l=a("Gu7T"),o=a.n(l),c=a("Xxa5"),v=a.n(c),u=a("exGp"),d=a.n(u),p=a("xelw"),f=a("ho+3"),h=a("DzDz"),x=a("mSAz"),A=a("gyMJ"),m=a("sICn").proxyTableApi,b=m.api,I=m.hot;console.log(b,I);var g={name:"rules_index",components:{sxNoRouteControl:p.a,sxOperationReport:f.a},data:function(){return{navArr:[],showAllForms:[],subNavData:[{label:"住院基本情况"},{label:"手术记录",submenu:[{label:"术前",submenu:[{label:"术前11212"}]}]}],fishData:{},fishAllData:[],allFish:{relation:{pattern:{target:"type",rule_type:"EQUAL",value:["INPUT","INT","DOUBLE","TEXTAREA"]},message:{target:"type",rule_type:"EQUAL",value:["INPUT","INT","DOUBLE","TEXTAREA"]},example:{target:"type",rule_type:"EQUAL",value:["INPUT","INT","DOUBLE","TEXTAREA"]},required:{target:"type",rule_type:"EQUAL",value:["INPUT","INT","DOUBLE","SELECT","SELECTMUTIPLE","DATE","DATETIME","RADIO","TEXTAREA","CHECKBOX","CASCADER"]},tree:{target:"type",rule_type:"EQUAL",value:"CASCADER"},layerTree:{target:"type",rule_type:"EQUAL",value:["SELECT","SELECTMUTIPLE","RADIO","CHECKBOX"]},radioAgain:{target:"type",rule_type:"EQUAL",value:"RADIO"},createCalculate:{target:"type",rule_type:"EQUAL",value:"CREATECALCULATE"},createTable:{target:"type",rule_type:"EQUAL",value:"CREATETABLE"}},fields:[{id:"type",label:"请选择类型",value:"",type:"RADIO",values:[{label:"输入框",value:"INPUT"},{label:"整数类型输入框",value:"INT"},{label:"浮点数类型输入框",value:"DOUBLE"},{label:"文本标签",value:"TEXTAREA"},{label:"选择器",value:"SELECT"},{label:"多选选择器",value:"SELECTMUTIPLE"},{label:"日期选择器",value:"DATE"},{label:"日期时间选择器",value:"DATETIME"},{label:"单选框",value:"RADIO"},{label:"多选框",value:"CHECKBOX"},{label:"级联选择器",value:"CASCADER"},{label:"创建表格",value:"CREATETABLE"},{label:"计算",value:"CREATECALCULATE"}],validations:[{required:!0,message:"请选择类型",trigger:"change"}]},{id:"id",label:"ID",value:"",type:"INPUT",validations:[{required:!0,message:"请输入组件ID",trigger:"change"},{pattern:"^[a-zA-Z][a-zA-Z0-9]+$",message:"只能输入以英文字母开头的英文或数字(两位以上)",trigger:"change"}]},{id:"label",label:"标签名字",value:"",type:"INPUT",validations:[{required:!0,message:"请输入组件标签名",trigger:"change"},{pattern:"^[^\\s~！@#￥%……&*（）——+~!@#$%^&*()_+]*$",message:"不能输入空格或特殊字符",trigger:"change"}]},{id:"pattern",label:"正则",type:"INPUT"},{id:"message",label:"正则提示信息",type:"INPUT",rules:{id:"type",rule_type:"EQUAL",value:"INPUT"}},{id:"example",label:"正则例子",type:"EXAMPLE"},{id:"tree",label:"创建级联",type:"TREE",values:[]},{id:"layerTree",label:"创建选项",type:"LAYERTREE",values:[]},{id:"required",label:"是否必填",value:"",type:"RADIO",values:[{label:"是",value:1},{label:"否",value:0}]},{id:"createCalculate",label:"ID公式",value:"",type:"CREATECALCULATE",validations:[{required:!0,message:"请输入需要计算的 ID 公式,如 (id1+id2)",trigger:"blur"}]},{id:"createTable",label:"创建表格",type:"CREATETABLE",values:[]}]},activeIndexNav:"住院基本情况",activeIndexId:"",activeIndex:0,patientInfo:{},ssbgModel:{operationCheckBox:[],operationSelect:[],operationSelectMz:[],operationSelectJc:[],operationSelectHj:[],operationDateTime:""},smf:!1}},created:function(){var e=this;return d()(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.$route.params.data&&(e.patientInfo=JSON.parse(e.$route.params.data),e.subNavData=e.patientInfo.information.data,e.activeIndexNav=e.patientInfo.activeIndexNav?e.patientInfo.activeIndexNav:"住院基本情况",console.log(e.subNavData,"cccccccc")),t.next=3,e.firstShow();case 3:return t.next=5,e.init();case 5:e.show();case 6:case"end":return t.stop()}},t,e)}))()},methods:{firstShow:function(){var e=this;return d()(v.a.mark(function t(){var a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.c)();case 2:(a=t.sent)&&(e.showAllForms=a.data.entity);case 4:case"end":return t.stop()}},t,e)}))()},show:function(){var e=this;return d()(v.a.mark(function t(){var a,n,r,i,l,c,u,d;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v=e.patientInfo.id,A.a.get(b+"/record/"+v);case 2:if(!(a=t.sent)){t.next=25;break}for(e.fishAllData=a.data.entity?[].concat(o()(a.data.entity.forms)):[],n=e.gainId(e.subNavData,e.activeIndexNav),r=!0,i=!1,l=void 0,t.prev=9,c=s()(e.fishAllData);!(r=(u=c.next()).done);r=!0)d=u.value,n===d.id&&(e.fishData=d.data);t.next=17;break;case 13:t.prev=13,t.t0=t.catch(9),i=!0,l=t.t0;case 17:t.prev=17,t.prev=18,!r&&c.return&&c.return();case 20:if(t.prev=20,!i){t.next=23;break}throw l;case 23:return t.finish(20);case 24:return t.finish(17);case 25:console.log(e.fishAllData,"firstShow");case 26:case"end":return t.stop()}var v},t,e,[[9,13,17,25],[18,,20,24]])}))()},init:function(){var e=this;return d()(v.a.mark(function t(){var a,n,r,i,l,o,c;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.navArr=[],a=[],n=!0,r=!1,i=void 0,t.prev=5,l=s()(e.showAllForms);case 7:if(n=(o=l.next()).done){t.next=15;break}if(c=o.value,!e.activeIndexNav.includes(c.phase)){t.next=12;break}return t.next=12,a.push(c);case 12:n=!0,t.next=7;break;case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(5),r=!0,i=t.t0;case 21:t.prev=21,t.prev=22,!n&&l.return&&l.return();case 24:if(t.prev=24,!r){t.next=27;break}throw i;case 27:return t.finish(24);case 28:return t.finish(21);case 29:e.navArr=[].concat(a),e.smf=!0;case 31:case"end":return t.stop()}},t,e,[[5,17,21,29],[22,,24,28]])}))()},emitClick:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(v.a.mark(function a(){return v.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.smf=!1,e.activeIndex=t.index,console.log(e.activeIndex,"this.activeIndex"),setTimeout(function(t){e.smf=!0},1);case 4:case"end":return a.stop()}},a,e)}))()},gainId:function(e,t){for(var a in e){if(e[a].label===t)return e[a].id;if(e[a].submenu.length&&this.gainId(e[a].submenu))return this.gainId(e[a].submenu)}},handleSelect:function(e,t){var a=this;return d()(v.a.mark(function n(){var r,i,l,o,c,u,d;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(console.log(e,t),a.smf=!1,a.activeIndexNav=e,r=a.gainId(a.subNavData,e),i=!0,l=!1,o=void 0,n.prev=7,c=s()(a.fishAllData);!(i=(u=c.next()).done);i=!0)d=u.value,r===d.id&&(a.fishData=d.data);n.next=15;break;case 11:n.prev=11,n.t0=n.catch(7),l=!0,o=n.t0;case 15:n.prev=15,n.prev=16,!i&&c.return&&c.return();case 18:if(n.prev=18,!l){n.next=21;break}throw o;case 21:return n.finish(18);case 22:return n.finish(15);case 23:setTimeout(function(e){a.init()},1);case 24:case"end":return n.stop()}},n,a,[[7,11,15,23],[16,,18,22]])}))()},generalSubmit:function(){var e=this;return d()(v.a.mark(function t(){var a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.navArr),console.log(e.activeIndex),console.log(e.activeIndexNav),e.$refs.thatForm.consoleData(),t.next=6,Object(x.c)(r()(e.patientInfo,{data:e.fishData}));case 6:a=t.sent,console.log(a),a&&e.generalBack();case 9:case"end":return t.stop()}},t,e)}))()},generalDelete:function(){},generalSave:function(){var e=this;return d()(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.$refs.thatForm.notVerifying(),t.next=3,Object(x.b)(r()(e.patientInfo,{data:e.fishData}));case 3:t.sent&&e.activeIndex<=e.navArr.length-1&&e.activeIndex++;case 5:case"end":return t.stop()}},t,e)}))()},notVerifying:function(e,t,a,n,r,i,s,l){var o=this;return d()(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o.$set(o.fishData,o.navArr[o.activeIndex].id,t);case 1:case"end":return e.stop()}},e,o)}))()},consoleData:function(e,t,a,n,r,i,s,l){var o=this;return d()(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o.$set(o.fishData,o.navArr[o.activeIndex].id,t);case 1:case"end":return e.stop()}},e,o)}))()},generalBack:function(){this.$router.go(-1)}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"formAll"},[a("div",{staticClass:"formContent"},[a("div",{staticClass:"formTopContent"},[a("el-menu",{staticClass:"formTopLeft",attrs:{"default-active":e.activeIndexNav,mode:"horizontal"},on:{select:e.handleSelect}},[e._l(e.subNavData,function(t,n){return[t.submenu.length?a("el-submenu",{key:n,attrs:{index:t.label,"show-timeout":100}},[a("template",{slot:"title"},[e._v(e._s(t.label))]),e._v(" "),e._l(t.submenu,function(t,r){return t.submenu.length?a("el-menu-item",{key:r,attrs:{index:t.label}},[a("el-submenu",{attrs:{index:t.label}},[a("template",{slot:"title"},[e._v(e._s(t.label))]),e._v(" "),e._l(t.submenu,function(t,n){return a("el-menu-item",{key:n,attrs:{index:t.label}},[e._v(e._s(t.label))])})],2)],1):a("el-menu-item",{key:n,attrs:{index:t.label}},[e._v(e._s(t.label))])})],2):a("el-menu-item",{key:n,attrs:{index:t.label}},[e._v(e._s(t.label))])]})],2),e._v(" "),a("div",{staticClass:"formTopRight"},[e._v("\n        患者: "),a("span",{staticStyle:{color:"#117FD1",opacity:"0.9"}},[e._v(e._s(e.patientInfo.patientName))]),e._v(" ("+e._s(parseInt(e.patientInfo.gender)?"男":"女")+") 住院号："+e._s(e.patientInfo.patientId)+"\n      ")])],1),e._v(" "),Boolean(e.navArr[e.activeIndex])?a("div",{staticClass:"formContentContent"},[a("sx-no-route-control",{attrs:{navArr:e.navArr,activeIndex:e.activeIndex},on:{emitClick:e.emitClick}}),e._v(" "),a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"rightContentControl"},[a("div",{staticClass:"rightContentControlName"},[e.navArr[e.activeIndex].name.length<14?a("div",[e._v("\n              "+e._s(e.navArr[e.activeIndex]?e.navArr[e.activeIndex].name:"")+"\n            ")]):a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top",content:e.navArr[e.activeIndex]?e.navArr[e.activeIndex].name:""}},[a("div",{staticStyle:{"font-weight":"bold",width:"210px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[e._v("\n                "+e._s(e.navArr[e.activeIndex]?e.navArr[e.activeIndex].name:"")+"\n              ")])]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top",content:e.navArr[e.activeIndex]?e.navArr[e.activeIndex].description:""}},[a("div",{staticStyle:{"font-size":"13px","font-weight":"400",width:"180px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[e._v("\n                "+e._s(e.navArr[e.activeIndex]?e.navArr[e.activeIndex].description:"")+"\n              ")])])],1),e._v(" "),a("div",{staticClass:"rightContentControlBtn"})]),e._v(" "),a("div",{staticClass:"formContentRight"},[a("div",{staticClass:"rightContent"},[e.navArr[e.activeIndex]&&e.navArr[e.activeIndex].isStatic?e._e():a("div",{staticClass:"rightContentDynamic"},[e.smf?a("sx-min-form",{ref:"thatForm",attrs:{disabled:"",mozhu:e.navArr[e.activeIndex]},on:{notVerifying:e.notVerifying,consoleData:e.consoleData},model:{value:e.fishData[e.navArr[e.activeIndex].id],callback:function(t){e.$set(e.fishData,e.navArr[e.activeIndex].id,t)},expression:"fishData[navArr[activeIndex].id]"}}):e._e()],1),e._v(" "),a("div",{staticClass:"rightContentStatic"},[e.navArr[e.activeIndex]&&"ssbg"===e.navArr[e.activeIndex].isStatic?a("sx-operation-report",{ref:"ssbgModel",model:{value:e.ssbgModel,callback:function(t){e.ssbgModel=t},expression:"ssbgModel"}}):e._e()],1)])])])],1):e._e(),e._v(" "),Boolean(e.navArr[e.activeIndex])?e._e():a("div",{staticStyle:{"text-align":"center",padding:"150px"}},[e._v("\n      暂无数据\n    ")])])])},staticRenderFns:[]};var T=a("VU/8")(g,E,!1,function(e){a("Yj/T")},"data-v-2eb03eea",null);t.default=T.exports},"Yj/T":function(e,t){}});