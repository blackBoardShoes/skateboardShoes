webpackJsonp([7],{"3vWW":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Gu7T"),n=a.n(r),s=a("woOf"),o=a.n(s),l=a("BO1k"),i=a.n(l),c=a("Xxa5"),d=a.n(c),f=a("exGp"),u=a.n(f),p=a("UhWg"),m={props:{autoComplete:{type:String,default:"off"},model:String,index:null,disabled:{type:Boolean,default:!1},accept:{type:String,default:"image/*"}},methods:{onRead:function(e,t,a){var r=this,n=e.target.files||e.dataTransfer.files;if(n[0])if(n[0].size/1024/1024>9)this.$emit("onRead",!1);else{var s=new FileReader;s.readAsDataURL(n[0]),s.onload=function(e){console.log({model:t,index:a,file:n[0],result:e.target.result,event:e},"-----file"),r.$emit("onRead",{model:t,index:a,file:n[0],result:e.target.result,event:e})}}console.log("fileOnRead")}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fileAll"},[a("label",[e._t("default"),e._v(" "),a("input",e._b({ref:"inputFile",staticClass:"fileClass",attrs:{type:"file",accept:e.accept},on:{change:function(t){e.onRead(t,e.model,e.index)}}},"input",e.$props,!1))],2)])},staticRenderFns:[]};var h=a("VU/8")(m,g,!1,function(e){a("GRw/")},"data-v-2970fc34",null).exports,v=a("t9TI"),b=a("cipx"),w={components:{sxFile:h,sxSegmentingLine:p.a},data:function(){return{imgLoading:!1,tableData:[],formModel:{id:"",name:"",type:"",emerge:!1,reference:"",paraphrase:"",images:[],inputImages:[]},rules:{name:[{required:!0,message:"请输入术语名称",trigger:"change"}],type:[{required:!0,message:"请选择术语类别",trigger:"change"}]},searchPatternData:"",currentPage:1,perPage:5,total:0,images:[{source:a("93nN"),thumbnail:a("93nN")},{source:"https://ss1.baidu.com/-4o3dSag_xI4khGko9WTAnF6hhy/image/h%3D300/sign=116399c62434349b6b066885f9eb1521/91ef76c6a7efce1ba958b016a351f3deb58f65fe.jpg",thumbnail:a("93nN")}],options:{inline:!0,button:!0,navbar:!0,title:!1,toolbar:!0,tooltip:!0,movable:!0,zoomable:!0,rotatable:!1,scalable:!1,transition:!0,fullscreen:!0,keyboard:!0,url:"data-source"},addOrEdit:!0,fieldsData:[]}},created:function(){this.firstShow(),this.show()},methods:{inited:function(e){this.$viewer=e},firstShow:function(){var e=this;return u()(d.a.mark(function t(){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(v.a)();case 2:(a=t.sent)&&(e.fieldsData=a.data.entity),console.log(e.fieldsData);case 5:case"end":return t.stop()}},t,e)}))()},show:function(){var e=this;return u()(d.a.mark(function t(){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(b.c)({currentPage:e.currentPage,perPage:e.perPage,searchPattern:e.searchPatternData});case 2:if(a=t.sent,console.log(a),!a){t.next=8;break}return e.total=a.data.entity.total,e.tableData=a.data.entity.data,t.abrupt("return",!0);case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}},t,e)}))()},changeName:function(e){var t=!0,a=!1,r=void 0;try{for(var n,s=i()(this.fieldsData);!(t=(n=s.next()).done);t=!0){var o=n.value;e===o.id&&(this.formModel.name=o.label)}}catch(e){a=!0,r=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw r}}},searchPattern:function(){var e=this;return u()(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.show();case 2:if(!t.sent){t.next=6;break}e.$message({type:"success",showClose:!0,message:"查询完毕"}),t.next=7;break;case 6:e.$message({showClose:!0,message:"查询失败"});case 7:case"end":return t.stop()}},t,e)}))()},deleteWhat:function(){var e=this;return u()(d.a.mark(function t(){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("111"),e.addOrEdit){t.next=12;break}return console.log(e.formModel),t.next=5,Object(b.d)(e.formModel);case 5:a=t.sent,console.log(a),e.show(),e.$refs.formModel.resetFields(),e.addOrEdit=!0,t.next=13;break;case 12:e.$message({showClose:!0,message:"请点击要删除的表格行"});case 13:case"end":return t.stop()}},t,e)}))()},pageSize:function(e){this.perPage=e,this.show()},changePage:function(e){var t=this;return u()(d.a.mark(function a(){return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.currentPage=e,t.show();case 2:case"end":return a.stop()}},a,t)}))()},addWhat:function(){this.addOrEdit=!0,this.imgLoading=!1,this.$refs.formModel.resetFields()},saveWhat:function(){var e,t=this;this.$refs.formModel.validate((e=u()(d.a.mark(function e(a){var r,n,s,l,c,f,u,p,m,g,h;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=49;break}r=o()({},t.formModel,{images:[]}),n=new FormData,s=[],e.t0=d.a.keys(o()({},t.formModel));case 5:if((e.t1=e.t0()).done){e.next=33;break}if("inputImages"!==(l=e.t1.value)){e.next=29;break}for(c=!0,f=!1,u=void 0,e.prev=11,p=i()(r[l]);!(c=(m=p.next()).done);c=!0)(g=m.value).length<300?s.push(g):n.append("inputImages",g);e.next=19;break;case 15:e.prev=15,e.t2=e.catch(11),f=!0,u=e.t2;case 19:e.prev=19,e.prev=20,!c&&p.return&&p.return();case 22:if(e.prev=22,!f){e.next=25;break}throw u;case 25:return e.finish(22);case 26:return e.finish(19);case 27:e.next=31;break;case 29:console.log("ccc",r[l]),n.append(l,r[l]);case 31:e.next=5;break;case 33:if(n.append("oldImages",s),!t.addOrEdit){e.next=43;break}return console.log(t.formModel),e.next=38,Object(b.a)(n);case 38:h=e.sent,console.log(h),h&&(t.$refs.formModel.resetFields(),t.formModel.inputImages=[],t.show()),e.next=47;break;case 43:return e.next=45,Object(b.e)(n);case 45:e.sent&&(t.addOrEdit=!0,t.$refs.formModel.resetFields(),t.show());case 47:e.next=51;break;case 49:return console.log("error submit!!"),e.abrupt("return",!1);case 51:case"end":return e.stop()}},e,t,[[11,15,19,27],[20,,22,26]])})),function(t){return e.apply(this,arguments)}))},handleCurrentChange:function(e){var t=this;return u()(d.a.mark(function a(){return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:console.log(e,"valvalvalvalvalvla"),e&&(t.addOrEdit=!1,t.formModel=o()(t.formModel,e,{inputImages:[].concat(n()(e.images))}));case 2:case"end":return a.stop()}},a,t)}))()},filterHandler:function(e,t,a){return console.log(e,t,a),t[a.property]===e},deleteImages:function(){this.formModel.images.splice(this.$viewer.index,1),this.formModel.inputImages.splice(this.$viewer.index,1)},onRead:function(e){e?(console.log(this.formModel),parseInt(this.formModel.images.length)<5?(this.formModel.images.push(e.result),this.formModel.inputImages.push(e.file)):this.$message({showClose:!0,message:"最多上传5张"})):console.log(e)}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sykAll"},[a("div",{staticClass:"sykContent"},[a("div",{staticClass:"sykContentTop"},[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"术语名字",clearable:"","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchPattern(t)}},model:{value:e.searchPatternData,callback:function(t){e.searchPatternData=t},expression:"searchPatternData"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addWhat}},[e._v("新增术语")])],1)],1),e._v(" "),a("br"),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"300","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"name",align:"center",label:"术语名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"id",align:"center",label:"术语ID",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"emerge",align:"center",label:"是否显示",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.emerge?"是":"否")+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"reference",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.reference?t.row.reference:"/")+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"paraphrase",label:"释义"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right","margin-top":"15px"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper",total:e.total,"page-sizes":[5,10,15],"current-page":e.currentPage,"page-size":e.perPage},on:{"size-change":e.pageSize,"current-change":e.changePage}})],1)],1),e._v(" "),a("sx-segmenting-line",[a("div",{staticClass:"centerCenter",attrs:{slot:"prepend"},slot:"prepend"},[e._v("\n         术语详情-道损伤分型\n      ")]),e._v(" "),a("div",{staticClass:"centerCenter",attrs:{slot:"append"},slot:"append"},[a("el-button",{attrs:{size:"small",plain:"",type:"danger"},on:{click:e.deleteWhat}},[e._v("删除")]),e._v("\n          \n        "),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:e.saveWhat}},[e._v("保存")])],1)]),e._v(" "),a("div",{staticClass:"sykContentBottom"},[a("el-form",{ref:"formModel",staticClass:"formModelClass",attrs:{model:e.formModel,rules:e.rules,size:"mini","label-width":"100px"}},[a("el-form-item",{attrs:{label:"术语ID",prop:"id"}},[a("el-select",{attrs:{placeholder:"请选择(若无可不选)",clearable:"",filterable:""},on:{change:e.changeName},model:{value:e.formModel.id,callback:function(t){e.$set(e.formModel,"id",t)},expression:"formModel.id"}},e._l(e.fieldsData,function(e,t){return a("el-option",{key:t,attrs:{label:e.label+" "+e.id,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{"flex-grow":"0.7"},attrs:{label:"术语名称",prop:"name"}},[a("el-input",{model:{value:e.formModel.name,callback:function(t){e.$set(e.formModel,"name",t)},expression:"formModel.name"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"flex-grow":"0.3"},attrs:{label:"是否显示",prop:"emerge"}},[a("el-switch",{model:{value:e.formModel.emerge,callback:function(t){e.$set(e.formModel,"emerge",t)},expression:"formModel.emerge"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"flex-grow":"1"},attrs:{label:"术语备注",prop:"reference"}},[a("el-input",{model:{value:e.formModel.reference,callback:function(t){e.$set(e.formModel,"reference",t)},expression:"formModel.reference"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"术语释义",prop:"paraphrase"}},[a("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.formModel.paraphrase,callback:function(t){e.$set(e.formModel,"paraphrase",t)},expression:"formModel.paraphrase"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"示例图像",prop:"images"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.imgLoading,expression:"imgLoading"}],staticClass:"exampleImg"},[a("div",{staticClass:"exampleImgBtn"},[a("el-tooltip",{attrs:{effect:"dark",content:"删除当前图片",placement:"top"}},[a("i",{staticClass:"el-icon-close",on:{click:e.deleteImages}})]),e._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"上传图片",placement:"top"}},[a("sx-file",{on:{onRead:e.onRead}},[a("i",{staticClass:"el-icon-upload"})])],1)],1),e._v(" "),a("div",{staticClass:"exampleImages"},[a("viewer",{ref:"viewer",staticClass:"viewer",attrs:{images:e.formModel.images,options:e.options},on:{inited:e.inited},scopedSlots:e._u([{key:"default",fn:function(t){return[a("figure",{staticClass:"images"},e._l(t.images,function(e,t){return a("div",{key:t,staticClass:"image-wrapper"},[a("img",{staticClass:"image",attrs:{src:e,"data-source":e,alt:e.split("/").pop()}})])}))]}}])})],1)])])],1)],1)],1)])},staticRenderFns:[]};var k=a("VU/8")(w,x,!1,function(e){a("PZXG"),a("nvGg")},"data-v-0a79fcc4",null);t.default=k.exports},"GRw/":function(e,t){},PZXG:function(e,t){},nvGg:function(e,t){}});